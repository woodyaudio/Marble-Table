<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Woody-Table</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@700;800;900&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <style>
        :root {
            --main-blue: #0c3060;
            --tab-width: 70px;
        }

        /* ê¸°ë³¸ ì´ˆê¸°í™” */
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { 
            font-family: 'Noto Sans KR', sans-serif; 
            background: #f0f9ff; 
            height: 100vh; 
            overflow: hidden; 
        }

        #app { 
            width: 100%; 
            height: 100vh; 
            display: flex; 
            position: relative; 
        }

        /* [PC] ì™¼ìª½ ì„¸ë¡œ íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */
        #tab-nav {
            width: var(--tab-width);
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-right: 1px solid #e5e7eb;
            display: flex;
            flex-direction: column;
            z-index: 1002; /* ì§€ë„ë³´ë‹¤ ìœ„ */
            box-shadow: 2px 0 8px rgba(0,0,0,0.05);
        }

        .tab-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 1px solid #f3f4f6;
            color: #6b7280;
            font-weight: 600;
        }

        .tab-item.active {
            background: #eff6ff;
            color: var(--main-blue);
            border-left: 4px solid var(--main-blue);
        }

        .tab-icon { font-size: 1.8em; }
        .tab-text { font-size: 0.75em; }

        /* ë©”ì¸ ì»¨í…ì¸  ì˜ì—­ */
        #content-area {
            flex: 1;
            width: 100%;
            height: 100vh;
            overflow: hidden;
            position: relative;
        }

        /* [ëª¨ë°”ì¼] í•˜ë‹¨ íƒ­ ë°” ìµœì í™” */
        @media (max-width: 768px) {
            #app { flex-direction: column; }

            #tab-nav {
                position: fixed;
                bottom: 0; left: 0; right: 0;
                width: 100%;
                height: 45px; /* ìš”ì²­í•˜ì‹  ëŒ€ë¡œ ê¸°ì¡´ë³´ë‹¤ ì ˆë°˜ ê°€ê¹Œì´ ì¶•ì†Œ */
                flex-direction: row;
                border-right: none;
                border-top: 1px solid #e5e7eb;
                padding-bottom: env(safe-area-inset-bottom, 0);
                background: #fff;
            }

            .tab-item {
                flex: 1;
                border-bottom: none;
                border-right: 1px solid #f3f4f6;
                padding: 5px 0;
                gap: 2px;
            }

            .tab-item:last-child { border-right: none; }

            .tab-item.active {
                border-left: none;
                border-top: 3px solid var(--main-blue);
                background: #fff;
            }

            .tab-icon { font-size: 1.2em; } /* ëª¨ë°”ì¼ ì•„ì´ì½˜ ì¶•ì†Œ */
            .tab-text { font-size: 10px; } /* ëª¨ë°”ì¼ í…ìŠ¤íŠ¸ ì¶•ì†Œ */

            #content-area {
                height: calc(100vh - 45px); /* í•˜ë‹¨ ë°” ë†’ì´ë§Œí¼ ì œì™¸ */
            }
        }
    </style>
</head>
<body>

<div id="app">
    <nav id="tab-nav">
        <div class="tab-item active" data-tab="map">
            <div class="tab-icon">ğŸ—ºï¸</div>
            <div class="tab-text">ì§€ë„ í™ˆ</div>
        </div>
        <div class="tab-item" data-tab="game">
            <div class="tab-icon">ğŸ®</div>
            <div class="tab-text">ê²Œì„</div>
        </div>
        <div class="tab-item" data-tab="contact">
            <div class="tab-icon">âœ‰ï¸</div>
            <div class="tab-text">ë¬¸ì˜</div>
        </div>
    </nav>

    <main id="content-area"></main>
</div>

<script>
    let currentTab = '';

    /**
     * íƒ­ì„ ë¡œë“œí•˜ëŠ” ë©”ì¸ í•¨ìˆ˜
     */
    function loadTab(tabName) {
        // ì´ë¯¸ ì„ íƒëœ íƒ­ì´ë©´ ì¤‘ë‹¨
        if (currentTab === tabName) return;
        currentTab = tabName;
        
        // íƒ­ UI í™œì„±í™” ìƒíƒœ ë³€ê²½
        document.querySelectorAll('.tab-item').forEach(item => {
            item.classList.remove('active');
            if (item.dataset.tab === tabName) {
                item.classList.add('active');
            }
        });

        // ì™¸ë¶€ HTML íŒŒì¼ ê°€ì ¸ì˜¤ê¸°
        fetch(`${tabName}-tab.html`)
            .then(res => {
                if (!res.ok) throw new Error('íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return res.text();
            })
            .then(html => {
                const area = document.getElementById('content-area');
                area.innerHTML = html;
                
                // ì‚½ì…ëœ HTML ë‚´ì˜ script íƒœê·¸ë¥¼ ì°¾ì•„ ìˆ˜ë™ìœ¼ë¡œ ì‹¤í–‰
                // (innerHTMLë¡œ ë„£ì€ ìŠ¤í¬ë¦½íŠ¸ëŠ” ë³´ì•ˆìƒ ìë™ ì‹¤í–‰ë˜ì§€ ì•Šê¸° ë•Œë¬¸)
                const scripts = area.querySelectorAll('script');
                scripts.forEach(oldScript => {
                    const newScript = document.createElement('script');
                    
                    // ê¸°ì¡´ ìŠ¤í¬ë¦½íŠ¸ì˜ ì†ì„± ë³µì‚¬ (src ë“±)
                    Array.from(oldScript.attributes).forEach(attr => {
                        newScript.setAttribute(attr.name, attr.value);
                    });
                    
                    // ì¸ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸ ë‚´ìš© ë³µì‚¬
                    newScript.appendChild(document.createTextNode(oldScript.innerHTML));
                    
                    // DOMì— ì‚½ì…í•˜ì—¬ ì‹¤í–‰ í›„ ì¦‰ì‹œ ì œê±° (ë©”ëª¨ë¦¬ ê´€ë¦¬)
                    document.body.appendChild(newScript);
                    newScript.remove();
                });
            })
            .catch(err => {
                console.error('íƒ­ ë¡œë”© ì—ëŸ¬:', err);
                document.getElementById('content-area').innerHTML = 
                    `<div style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100%; color:#94a3b8;">
                        <p style="font-size:3em;">âš ï¸</p>
                        <p style="margin-top:10px;">${tabName} í˜ì´ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.</p>
                    </div>`;
            });
    }

    // ëª¨ë“  íƒ­ ì•„ì´í…œì— í´ë¦­ ì´ë²¤íŠ¸ ë°”ì¸ë”©
    document.querySelectorAll('.tab-item').forEach(item => {
        item.addEventListener('click', () => {
            loadTab(item.dataset.tab);
        });
    });

    // ì•± ì‹¤í–‰ ì‹œ ì²« í™”ë©´ìœ¼ë¡œ 'map' íƒ­ ë¡œë“œ
    window.addEventListener('load', () => {
        loadTab('map');
    });
</script>

</body>
</html>